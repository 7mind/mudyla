use flake

echo "envrc: about to source init script in $SHELL / $PPID"
source "${PWD}/completions/init.sh"
echo "envrc: init script done in $SHELL / $PPID"


# #Load completions after direnv sets up the environment
# if [ -n "${ZSH_VERSION}" ] && [ -d "${PWD}/completions" ]; then
#   # For zsh: add to fpath and setup completions
#   export FPATH="${PWD}/completions:${FPATH}"
#   typeset -U fpath
#   fpath=("${PWD}/completions" ${fpath[@]})
#   autoload -Uz compinit && compinit -i >/dev/null 2>&1 || true
#   autoload -Uz _mdl 2>/dev/null || true
#   compdef _mdl mdl 2>/dev/null || true
# elif [ -n "${BASH_VERSION}" ] && [ -f "${PWD}/completions/mdl.bash" ]; then
#   # For bash: source completion file
#   source "${PWD}/completions/mdl.bash"
# fi


# # Load completions after direnv sets up the environment
# if [ -n "${ZSH_VERSION}" ] && [ -d "${PWD}/completions" ]; then
#   # For zsh: add to fpath and setup completions
#   export FPATH="${PWD}/completions:${FPATH}"
#   typeset -U fpath
#   fpath=("${PWD}/completions" ${fpath[@]})
#   autoload -Uz compinit && compinit -i >/dev/null 2>&1 || true
#   autoload -Uz _mdl 2>/dev/null || true
#   compdef _mdl mdl 2>/dev/null || true
# elif [ -n "${BASH_VERSION}" ] && [ -f "${PWD}/completions/mdl.bash" ]; then
#   # For bash: source completion file
#   source "${PWD}/completions/mdl.bash"
# fi
