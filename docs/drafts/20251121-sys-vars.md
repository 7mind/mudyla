# System Variables

Mudyla provides system variables that can be accessed in actions for various purposes like reporting, debugging, and file management.

## Available System Variables

### `sys.project-root`
The absolute path to the project root directory (where mudyla is executed from).

### `sys.run-dir`
The absolute path to the current run directory (`.mdl/runs/<timestamp>`). Each execution creates a unique run directory containing all action subdirectories and execution artifacts.

### `sys.action-dir`
The absolute path to the current action's directory within the run directory. This is where the action's stdout.log, stderr.log, meta.json, and other execution artifacts are stored.

## Usage Examples

### Bash

```bash
# action: generate-report

## definition

```bash
# Access system variables using ${sys.variable-name}
echo "Project: ${sys.project-root}"
echo "Run: ${sys.run-dir}"
echo "Action: ${sys.action-dir}"

# Write a report to the action directory
cat > ${sys.action-dir}/report.txt <<EOF
Execution Report
================
Project Root: ${sys.project-root}
Run Directory: ${sys.run-dir}
Action Directory: ${sys.action-dir}
Timestamp: $(date)
EOF

# Write summary to the run directory (shared across all actions)
echo "Report generated at $(date)" >> ${sys.run-dir}/execution-summary.txt

ret report:file="${sys.action-dir}/report.txt"
```
\`\`\`

### Python

```python
# action: analyze-data

## definition

```python
import json
from pathlib import Path

# Access system variables through mdl.sys dictionary
project_root = mdl.sys['project-root']
run_dir = mdl.sys['run-dir']
action_dir = mdl.sys['action-dir']

print(f"Project: {project_root}")
print(f"Run: {run_dir}")
print(f"Action: {action_dir}")

# Write analysis results to the action directory
results = {
    "project_root": project_root,
    "run_directory": run_dir,
    "action_directory": action_dir,
    "data_processed": True
}

results_file = Path(action_dir) / "analysis-results.json"
with open(results_file, 'w') as f:
    json.dump(results, f, indent=2)

# Write to the run directory (accessible by other actions)
summary_file = Path(run_dir) / "analysis-summary.txt"
with open(summary_file, 'a') as f:
    f.write(f"Analysis completed for {action_dir}\\n")

mdl.ret("results-file", str(results_file), "file")
```
\`\`\`

## Use Cases

### Debugging
- Store debug information in `sys.action-dir` for per-action troubleshooting
- Access logs via `${sys.action-dir}/stdout.log` or `${sys.action-dir}/stderr.log`

### Reporting
- Generate per-action reports in `sys.action-dir`
- Create consolidated reports in `sys.run-dir` that aggregate data from multiple actions

### Cross-Action Communication
- Write shared data to `sys.run-dir` that other actions can read
- Store intermediate results that downstream actions need to access

### Artifacts Management
- Save build artifacts in `sys.action-dir` for archival
- Copy important artifacts to `sys.project-root` for version control
